plugins {
    id 'java-gradle-plugin'
    id 'com.gradle.plugin-publish' version '0.13.0'
    id 'java'
}

group 'de.kontext_e.jqassistant.gradle'
version '1.0.1-SNAPSHOT'

repositories {
    jcenter()
}

dependencies {
    implementation gradleApi()
    implementation localGroovy()

    compileOnly "com.buschmais.jqassistant.cli:jqassistant-commandline-neo4jv3:1.9.1"

    testImplementation gradleTestKit()
    testImplementation('org.junit.jupiter:junit-jupiter:5.5.2')
}

test {
    useJUnitPlatform()
    // pass the proxy configuration to the gradle test executor
    systemProperty "http.proxyHost", System.getProperty('http.proxyHost')
    systemProperty "http.proxyPort", System.getProperty('http.proxyPort')
    systemProperty "https.proxyHost", System.getProperty('https.proxyHost')
    systemProperty "https.proxyPort", System.getProperty('https.proxyPort')
}

pluginBundle {
    website = 'https://github.com/kontext-e/jqassistant-gradle-plugin'
    vcsUrl = 'https://github.com/kontext-e/jqassistant-gradle-plugin'
    tags = ['jqassistant','code quality','architecture']
}

gradlePlugin {
    plugins {
        jqassistantPlugin {
            // publish with ./gradlew publishPlugins
            id = 'de.kontext_e.jqassistant.gradle'
            displayName = 'jQAssistant Gradle plugin'
            description = 'Scans project artifacts, enriches with higher level concepts and applies constraints. See https://jqassistant.org/ for details.'
            implementationClass = 'de.kontext_e.jqassistant.gradle.JqassistantGradlePlugin'
        }
    }
}
